<extension name="monitorswitch">
	<class name="Tracker" parent="Resource">
			<variable type="String" name="occi.core.title" value=""/>
			<variable type="String" name="occi.core.summary" value=""/>
			<variable type="String" name="occi.core.id" value=""/>
			<action name="broadcast"/>
			<action name="log"/>
			<place name="TrackerInit" initial="true" final="false"/>
			<transition from="TrackerInit" to="TrackerInit" action="broadcast"/>
			<transition from="TrackerInit" to="TrackerInit" action="log"/>
	</class>
	
	<class name="Peer" parent="Resource">
			<variable type="String" name="occi.core.title" value=""/>
			<variable type="String" name="occi.core.summary" value=""/>
			<variable type="String" name="occi.core.id" value=""/>
			<action name="register"/>
			<action name="unregister"/>
			<action name="speak"/>
			<action name="listen"/>
			<place name="PeerInit" initial="true" final="false"/>
			<place name="Activated" initial="false" final="false"/>
			<transition from="PeerInit" to="Activated" action="register"/>
			<transition from="Activated" to="PeerInit" action="unregister"/>
			<transition from="Activated" to="Activated" action="speak"/>
			<transition from="Activated" to="Activated" action="listen"/>
	</class>
	
	<annotations name="Specification">
			<annotation id="TP_01">For any Peer p, there is a Tracker t such that p shall register synchronized with t shall log.</annotation>
			<annotation id="TP_02">For any Peer p, there is a Tracker t such that p shall unregister synchronized with t shall log.</annotation>
			<annotation id="TP_03_speak">For any Tracker t, if t executes broadcast, there is a Peer p, p is registered to t and p shall speak and all Peer p1 such that p1 is registered to t and p1 is different with p and p1 shall not speak</annotation>
			<annotation id="TP_03_listen">For any Tracker t, if t executes broadcast, there is a Peer p, p is registered to t and p shall listen and all Peer p1 such that p1 is registered to t and p1 is different with p and p1 shall listen</annotation>
			<annotation id="TP_04">For any Tracker t, if t executes broadcast, For any Peer p where p is registered to t and (p shall not speak or p shall not listen) or p shall unregister</annotation>
			<annotation id="TP_06_mutex">For all Peer p, p shall either speak or listen. </annotation>
			<annotation id="TP_05_listen">For all Peer p, there is a Tracker t such that if t executes broadcast and p is registered to t, p shall listen and for all Peer p1 where p1 is registered to t and p1 is different with p and p1 shall listen.</annotation>
			<annotation id="TP_05_speak">For all Peer p, there is a Tracker t such that if t executes broadcast and p is registered to t, p shall speak and for all Peer p1 where p1 is registered to t and p1 is different with p and p1 shall not speak </annotation>
			<annotation id="MAIN">TP_01, TP_02, TP_05</annotation>

	</annotations>

	
</extension>
